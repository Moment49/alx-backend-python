#!/bin/bash

# kurbeScript: Setup and verify Kubernetes with Minikube

# Step 1: Check if Minikube is installed
if ! command -v minikube &> /dev/null
then
    echo "âŒ Minikube not found. Please install Minikube first."
    echo "Visit: https://minikube.sigs.k8s.io/docs/start/"
    exit 1
else
    echo "âœ… Minikube is installed."
fi

# Step 2: Check Minikube cluster status
echo "ğŸ” Checking Minikube cluster status..."
CLUSTER_STATUS=$(minikube status --format='{{.Host}}')

if [[ "$CLUSTER_STATUS" == "Running" ]]; then
    echo "âœ… Minikube cluster is already running."
else
    echo "ğŸš€ Starting Minikube cluster..."
    minikube start
fi

# Step 3: Verify cluster info
echo "ğŸ” Verifying cluster status..."
kubectl cluster-info || { echo "âŒ Cluster not accessible."; exit 1; }

# Step 4: Get all pods in default namespace
echo "ğŸ“¦ Retrieving pods..."
kubectl get pods

echo "âœ… Kubernetes setup and verification complete."
